var documenterSearchIndex = {"docs":
[{"location":"api/","page":"API","title":"API","text":"","category":"page"},{"location":"api/","page":"API","title":"API","text":"Modules = [qMRIColors]","category":"page"},{"location":"api/#qMRIColors.colorLogRemap","page":"API","title":"qMRIColors.colorLogRemap","text":"colorLogRemap(oriCmap, loLev=0.0, upLev=size(cmap)[1])\n\nApplies logarithmic scaling to oriCmap based on loLev and upLev.\n\nArguments\n\noriCmap: Original colormap array.\nloLev: Lower bound of the color range.\nupLev: Upper bound of the color range.\n\nReturns\n\nlogCmap: Colormap with logarithmic scaling applied.\n\n\n\n\n\n","category":"function"},{"location":"api/#qMRIColors.relaxationColorMap","page":"API","title":"qMRIColors.relaxationColorMap","text":"relaxationColorMap(maptype::AbstractString, x::AbstractArray, loLev=minimum(x), upLev=maximum(x))\n\nApplies a color mapping to a numerical array x based on a specified relaxation map type. Reads color data from a CSV file and adjusts values in x to provide a color-coded visualization.\n\nThis function is commonly used in data visualization, especially for MRI relaxation maps, to display data in a color-coded format for easier interpretation.\n\nArguments\n\nmaptype::AbstractString: The relaxation map type to use for color mapping. Common values include \"T1\", \"T2\", \"R1\", \"R2\", (see documentation).\nx::AbstractArray: An array of numerical values to be color-mapped.\nloLev: Lower bound for color mapping. Defaults to the minimum of x.\nupLev: Upper bound for color mapping. Defaults to the maximum of x.\n\nReturns\n\nrgb_vec: A vector of RGB colors representing the mapped values.\nxClip: A modified version of x with values adjusted based on loLev and upLev.\n\nDescription\n\nCalls read_map_csv(maptype) to load the colormap.\nAdjusts x based on loLev and upLev to produce xClip.\nMaps values to colors using colorLogRemap and converts to RGB.\n\n\n\n\n\n","category":"function"},{"location":"api/#qMRIColors.relaxationColorMap-2","page":"API","title":"qMRIColors.relaxationColorMap","text":"relaxationColorMap(maptype::AbstractString, loLev=0, upLev=256)\n\nSimplified variant of the above function. Only generates the RGB vector of colors without modifying an array x.\n\n\n\n\n\n","category":"function"},{"location":"clip/#Important-tips","page":"Important Tips","title":"Important tips","text":"","category":"section"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"The relaxationColorMap() function selects the appropriate color-map (in this case, Lipari for T1) and applies logarithm-processing on that color map. The resulting colormap is returned. The \"imclip\" image should retain the distinction between the \"invalid\" value of 0 (which is to be displayed as black) and \"valid\" values that are below loLev (these should be shown in a dark shade of blue). Depending on the calibration of your screen, you may or may not see that distinction.","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"A simplified processing can be done by","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"using qMRIColors\ncmap = relaxationColorMap(\"T1\")\nVIEW(x,c=cmap) # Do not use range limits here! ","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"Again, \"VIEW\" refers to your favorite viewing software.","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"If the simplified processing is invoked WITH use of range limits, then the  distinction is lost between invalid values and low-but-valid values. See second image in the  example below: it represents a circular object with a T1 value that is gradually increasing from top to bottom, but only valid within a circular \"object\", the outside thereof representing  unknown T1 values.","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"Let's build an example to see the effect.","category":"page"},{"location":"clip/#Create-a-Synthetic-phantom","page":"Important Tips","title":"Create a Synthetic phantom","text":"","category":"section"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"using qMRIColors\nusing CairoMakie\n\n# -----  Make test object: gradually increasing T1, but invalid outside a circle\nsize = 256; center = size÷2+1; radius = 100; origin = CartesianIndex(center,center)\nd(x::CartesianIndex, y::CartesianIndex) = √( (x[1]-y[1])^2 + (x[2]-y[2])^2 )\nrow = [10*i for i in 1:size]\ntestT1= zeros(size,size)\ntestT1 .= row\n\n# Set invalid values to 0\nallidx = CartesianIndices(testT1)\ninvalid = allidx[ d.(origin, allidx) .> radius];\ntestT1[invalid] .= 0\nnothing","category":"page"},{"location":"clip/#Display-the-example-in-3-ways","page":"Important Tips","title":"Display the example in 3 ways","text":"","category":"section"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"# -------------------- Display test object the correct and the wrong way\nloLev = 700\nupLev = 2000\nbegin\n  f=CairoMakie.Figure()\n  ax=Axis(f[1,1],aspect = DataAspect(),title = \"Using imClip\")\n  cmap,imClip = relaxationColorMap(\"T1\",testT1,loLev,upLev)\n  h=heatmap!(ax,rotr90(imClip),colormap=cmap,colorrange=(loLev,upLev))\n  Colorbar(f[1,2],h)\n  hidedecorations!(ax)\n\n  ax=Axis(f[2,1],aspect = DataAspect(),title = \"wrong: simplified, \\n with range\")\n  cmap = relaxationColorMap(\"T1\")\n  h=heatmap!(ax,rotr90(testT1),colormap=cmap,colorrange=(loLev,upLev))\n  Colorbar(f[2,2],h)\n  hidedecorations!(ax)\n\n  ax=Axis(f[3,1],aspect = DataAspect(),title = \"OK: simplified, \\n no range\")\n  cmap = relaxationColorMap(\"T1\")\n  h=heatmap!(ax,rotr90(testT1),colormap=cmap)\n  Colorbar(f[3,2],h)\n  hidedecorations!(ax)\n\n  # clean up plot\n  colsize!(f.layout, 1, Aspect(1,1))\n  resize_to_layout!(f)\n  f\nend","category":"page"},{"location":"clip/#Conclusion","page":"Important Tips","title":"Conclusion","text":"","category":"section"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":"Use the clip version of the images + colormap + the color range","category":"page"},{"location":"clip/","page":"Important Tips","title":"Important Tips","text":" cmap,imClip = relaxationColorMap(\"T1\",testT1,loLev,upLev)\nheatmap(rotr90(imClip),colormap=cmap,colorrange=(loLev,upLev))","category":"page"},{"location":"colormaps/#Colormaps-available","page":"qMRI colormaps","title":"Colormaps available","text":"","category":"section"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"using qMRIColors\nusing CairoMakie","category":"page"},{"location":"colormaps/#Lipari","page":"qMRI colormaps","title":"Lipari","text":"","category":"section"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"This colormap is used for :","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"T1","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"cmap = relaxationColorMap(\"T1\")\ncgrad(cmap)","category":"page"},{"location":"colormaps/#Navia","page":"qMRI colormaps","title":"Navia","text":"","category":"section"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"This colormap is used for :","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"T2\nT2*\nT1rho\nT1ρ","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"cmap = relaxationColorMap(\"T2\")\ncgrad(cmap)","category":"page"},{"location":"colormaps/#Reverse-lipari","page":"qMRI colormaps","title":"Reverse lipari","text":"","category":"section"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"This colormap is used for :","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"R1","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"cmap = relaxationColorMap(\"R1\")\ncgrad(cmap)","category":"page"},{"location":"colormaps/#Reverse-navia","page":"qMRI colormaps","title":"Reverse navia","text":"","category":"section"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"This colormap is used for :","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"R2\nR2*\nR1rho\nR1ρ\n","category":"page"},{"location":"colormaps/","page":"qMRI colormaps","title":"qMRI colormaps","text":"cmap = relaxationColorMap(\"R2\")\ncgrad(cmap)","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = qMRIColors","category":"page"},{"location":"","page":"Home","title":"Home","text":"Documentation for qMRIColors.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Julia package of https://github.com/mfuderer/colorResources","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package goes with the guideline paper published in Magnetic Resonance in Medicine, https://doi.org/10.1002/mrm.30290, Color-map recommendation for MR relaxomtry maps ","category":"page"},{"location":"","page":"Home","title":"Home","text":"It is to be used to display quantitative maps of T1, R1, T2, R2, T2, R2, T1rho and R1rho.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The package contains the Lipari color map, the Navia color map as well as the logarithm-processing as referred to by the publication.","category":"page"},{"location":"example/#Example","page":"Plot packages","title":"Example","text":"","category":"section"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"The generated colormap can be easily integrated with multiple plotting library like :","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"Makie.jl (recommended)\nPlots.jl\nPythonPlot.jl / PyPlot.jl","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"Download sample used in the following example","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"using FileIO\nusing Downloads\nusing qMRIColors\nusing CairoMakie\n\nurl = \"https://github.com/mfuderer/colorResources/raw/refs/heads/main/sampleT1map.jld\"\ndest_path = \"sampleT1map.jld\"\n# Download the file\nDownloads.download(url, dest_path)\nx = FileIO.load(\"sampleT1map.jld\")[\"sampleT1map\"]\nnothing # hide","category":"page"},{"location":"example/#Makie.jl","page":"Plot packages","title":"Makie.jl","text":"","category":"section"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"For Makie.jl the colormap can be directly used like heatmap(x,colormap=cmap,colorrange=(loLev,upLev))","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"using qMRIColors\nusing CairoMakie\n\n# -----  Make test object: gradually increasing T1, but invalid outside a circle\nsize = 256; center = size÷2+1; radius = 100; origin = CartesianIndex(center,center)\nd(x::CartesianIndex, y::CartesianIndex) = √( (x[1]-y[1])^2 + (x[2]-y[2])^2 )\nrow = [10*i for i in 1:size]\ntestT1= zeros(size,size)\ntestT1 .= row\n\n# Set invalid values to 0\nallidx = CartesianIndices(testT1)\ninvalid = allidx[ d.(origin, allidx) .> radius];\ntestT1[invalid] .= 0\n# ---------------------------------------------- Test object made\n\n# -------------------- Display test object the correct and the wrong way\nloLev = 700\nupLev = 1500\ncmap,imClip = relaxationColorMap(\"T1\",x,loLev,upLev)\nbegin\n  f=CairoMakie.Figure()\n  ax=Axis(f[1,1],aspect = DataAspect(),title = \"clip\")\n  h=heatmap!(ax,rotr90(imClip),colormap=cmap,colorrange=(loLev,upLev))\n  Colorbar(f[1,2],h)\n  hidedecorations!(ax)\n\n  ax=Axis(f[2,1],aspect = DataAspect(),title = \"no clip\")\n  h=heatmap!(ax,rotr90(x),colormap=cmap,colorrange=(loLev,upLev))\n  Colorbar(f[2,2],h)\n  hidedecorations!(ax)\n\n  # clean up plot\n  colsize!(f.layout, 1, Aspect(1,1))\n  resize_to_layout!(f)\n  f\nend","category":"page"},{"location":"example/#Plots.jl","page":"Plot packages","title":"Plots.jl","text":"","category":"section"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"Using GR backend","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"using qMRIColors\nusing Plots #GR backend\n\nloLev = 700\nupLev = 1500\ncmap,imClip = relaxationColorMap(\"T1\",x,loLev,upLev)\n\ngr(size=(400,300))\np = Plots.heatmap(imClip,\n            c=cmap,\n            clim=(loLev,upLev),\n            yflip=true\n            )","category":"page"},{"location":"example/#PythonPlot.jl-/-PyPlot.jl","page":"Plot packages","title":"PythonPlot.jl / PyPlot.jl","text":"","category":"section"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"The colormap needs to be converted to a usable format with the following command : cmap_py = PythonPlot.ColorMap(\"relaxationColor\", cmap, length(cmap), 1.0) ","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"using FileIO\nusing qMRIColors\n\nx = FileIO.load(\"sampleT1map.jld\")[\"sampleT1map\"]\n\nloLev = 700\nupLev = 1500\ncmap,imClip = relaxationColorMap(\"T1\",x,loLev,upLev)\n\nusing PythonPlot\ncmap_py = PythonPlot.ColorMap(\"relaxationColor\", cmap, length(cmap), 1.0) # translating the colormap to a format digestible by PythonPlot\n\nfigure()\nimshow(imClip, vmin=loLev, vmax =upLev, interpolation=\"bicubic\", cmap=cmap_py)\ncolorbar()\nPythonPlot.savefig(\"plot.png\")","category":"page"},{"location":"example/","page":"Plot packages","title":"Plot packages","text":"(Image: )","category":"page"}]
}
